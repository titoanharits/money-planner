<%# Onboarding Starter Page - Neo-Brutalist Style %>
<div class="min-h-screen flex items-center justify-center p-2 py-12">
  <div class="w-full max-w-md">
      
    <header class="text-center space-y-2 mb-6">
      <div class="inline-block bg-yellow-300 border-2 border-slate-900 px-4 py-1 rounded-full mb-4 transform -rotate-2">
        <span class="font-black text-xs uppercase tracking-tighter text-slate-900">Get Started</span>
      </div>
      <h1 class="text-5xl font-black uppercase italic leading-[0.9] text-slate-900 tracking-tighter">
        Setup Your <br> <span class="text-indigo-600">Plan</span>
      </h1>
    </header>

    <%= form_with url: onboarding_generate_path, method: :post, class: "space-y-8" do |f| %>
      <%# Input Income Card - Putih Bersih dengan Border Tebal %>
      <div class="bg-indigo-400 border-2 border-slate-900 p-6 rounded-3xl mb-8 text-white" data-controller="currency">
        <%= f.label :income, "Monthly Income", class: "block text-[10px] font-black uppercase tracking-widest mb-2 opacity-80" %>
        
        <div class="flex items-center">
          <span class="text-2xl font-black mr-2"><%= current_user.currency %></span>
          
          <%# Hidden field untuk menyimpan data asli (angka murni) %>
          <%= f.hidden_field :income, data: { currency_target: "hidden" } %>

          <%# Text field untuk tampilan yang otomatis terformat %>
          <input type="text" 
                placeholder="0"
                data-currency-target="display"
                data-action="input->currency#handleInput"
                class="bg-transparent text-4xl font-black placeholder:text-white/40 border-none focus:ring-0 w-full p-0 outline-none" />
        </div>
      </div>

      <%# Pilihan Profil Keuangan %>
      <div class="grid grid-cols-1 gap-4">
        <p class="font-black text-2xs uppercase tracking-widest text-slate-400 ml-2">Choose Your Strategy</p>
        
        <% [
          {id: 'balanced_50_30_20', title: '50/30/20 Rule', desc: 'Balanced & Popular', color: 'peer-checked:bg-emerald-300'},
          {id: 'committed_60', title: '60% Solution', desc: 'Focus on Committed Expenses', color: 'peer-checked:bg-sky-300'},
          {id: 'fire_aggressive', title: 'FIRE Aggressive', desc: 'Retire Early Goals', color: 'peer-checked:bg-rose-400'},
          {id: 'pareto_80_20', title: '80/20 Pareto', desc: 'Simple & Minimalist', color: 'peer-checked:bg-yellow-300'}
        ].each do |profile| %>
          <label class="relative cursor-pointer">
            <%= f.radio_button :profile, profile[:id], class: "peer hidden", required: true %>
            <div class="p-5 border-2 border-slate-900 rounded-3xl bg-white <%= profile[:color] %> transition-all active:scale-[0.97]">
              <div class="flex justify-between items-center">
                <div class="flex flex-col gap-0.5">
                  <h3 class="font-black uppercase text-sm text-slate-900"><%= profile[:title] %></h3>
                  <p class="text-xs font-bold opacity-50 uppercase tracking-widest"><%= profile[:desc] %></p>
                </div>
                
              </div>
            </div>
          </label>
        <% end %>
      </div>

      <%# Submit Button %>
      <div class="pt-4">
        <%= f.submit "Initialize My Plan", 
            class: "w-full py-4 bg-orange-300 text-slate-900 border-2 rounded-3xl font-black uppercase text-xl active:scale-95 transition-all cursor-pointer" %>
        <%= link_to root_path, method: :post, class: "block" do %>
          <p class="text-center text-xs font-bold text-slate-400 mt-4 uppercase tracking-widest">
            Skip plan
          </p>
        <% end %>
      </div>
    <% end %>
  </div>
</div> 
