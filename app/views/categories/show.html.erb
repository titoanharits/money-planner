<div class="space-y-6 pb-12">
  <%# 1. Hero Section %>
  <div class="animate-fade-up flex flex-col items-center py-10 bg-white border-2 border-slate-900 rounded-3xl text-center">
    <div class="w-24 h-24 rounded-2xl border-2 border-slate-900 flex items-center justify-center text-6xl mb-4 transition-transform hover:rotate-3" 
         style="background-color: <%= @category.color %>;">
      <%= @category.icon %>
    </div>
    <h2 class="text-2xl font-black text-slate-900 uppercase"><%= @category.name %></h2>
    <span class="px-4 py-1 bg-slate-100 border-2 border-slate-900 rounded-full text-2xs font-black uppercase mt-2">
      <%= @category.category_type %>
    </span>
  </div>

  <%# 2. Statistics Grid %>
  <div class="animate-fade-up grid grid-cols-2 gap-4" style="animation-delay: 100ms">
    <div class="bg-white border-2 border-slate-900 p-4 rounded-2xl">
      <p class="text-2xs font-black text-slate-400 uppercase mb-1">Budgeted</p>
      <p class="text-lg font-black text-indigo-400"><%= format_money(@category.current_budget&.amount || 0) %></p>
    </div>
    <div class="bg-white border-2 border-slate-900 p-4 rounded-2xl">
      <p class="text-2xs font-black text-slate-400 uppercase mb-1">Spent This Month</p>
      <%# Menggunakan variabel @total_spent asli %>
      <p class="text-lg font-black text-orange-400"><%= format_money(@total_spent) %></p> 
    </div>
  </div>

  <%# 3. Transaction History Section %>
  <div class="animate-fade-up space-y-6" style="animation-delay: 200ms">
    <div class="flex items-center gap-4 px-1">
      <h3 class="font-black text-slate-900 uppercase text-xs tracking-widest">Transaction History</h3>
      <div class="flex-1 h-0.5 bg-slate-900/10"></div>
    </div>

    <% if @transactions_by_date.any? %>
      <div class="space-y-8">
        <% @transactions_by_date.each do |date, transactions| %>
          <div class="space-y-3">
            <%# Date Label %>
            <p class="text-xs font-black text-slate-400 uppercase ml-1">
              <%= date == Date.today ? "Today" : (date == Date.yesterday ? "Yesterday" : date.strftime("%d %B %Y")) %>
            </p>

            <% transactions.each do |transaction| %>
              <div class="bg-white border-2 border-slate-900 p-4 rounded-2xl flex items-center justify-between group active:scale-[0.98] transition-all">
                <div class="flex flex-col">
                  <span class="font-black text-slate-900 text-sm uppercase">
                    <%= transaction.description.presence || "No Description" %>
                  </span>
                  <span class="text-2xs font-bold text-slate-400 uppercase">
                    <%= transaction.created_at.strftime("%I:%M %p") %>
                  </span>
                </div>
                
                <div class="text-right">
                  <p class="font-black text-sm <%= @category.category_type == 'expense' ? 'text-orange-400' : 'text-indigo-400' %>">
                    <%= @category.category_type == 'expense' ? '-' : '+' %>
                    <%= format_money(transaction.amount) %>
                  </p>
                </div>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    <% else %>
      <%# Empty State %>
      <div class="py-12 flex flex-col items-center justify-center bg-slate-50 border-2 border-dashed border-slate-300 rounded-3xl">
        <p class="text-2xs font-black text-slate-400 uppercase tracking-widest text-center">No transactions found<br>for this category</p>
      </div>
    <% end %>
  </div>

  <%# 4. Action Buttons %>
  <div class="animate-fade-up pt-6 space-y-3" style="animation-delay: 300ms">
    <%= link_to edit_category_path(@category), class: "w-full h-14 bg-indigo-400 border-2 border-slate-900 rounded-2xl flex items-center justify-center gap-3 font-black uppercase tracking-widest text-white active:scale-95 transition-all shadow-none" do %>
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="3"><path d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" stroke-linecap="round" stroke-linejoin="round"></path></svg>
      Edit Category
    <% end %>

    <%= link_to category_path(@category), 
                data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this category?" }, 
                class: "w-full h-14 bg-red-400 border-2 border-slate-900 rounded-2xl flex items-center justify-center gap-3 font-black uppercase tracking-widest text-white active:scale-95 transition-all shadow-none" do %>
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="3"><path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" stroke-linecap="round" stroke-linejoin="round"></path></svg>
      Delete Category
    <% end %>
  </div>
</div>